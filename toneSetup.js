////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////// Polyphonic Synthesizer
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
let polySynth = new Tone.PolySynth(Tone.Synth, {
  oscillator: {
    type: "fatsawtooth",
    count: 3,
    spread: 10,
  },
  envelope: {
    attack: 0.01,
    decay: 0.1,
    sustain: 0.5,
    release: 0.1,
    attackCurve: "exponential",
  }
});

////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////// Sampler
////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/* 
let sampler = new Tone.Sampler({
    urls: {
        D2: "mel_low_d.wav"
    },
    baseUrl: "./assets/audioSamples/"
});
*/

////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////// Audio Effects
////////////////////////////////////////////////////////////////////////////////////////////////////////////////

const filter = new Tone.Filter(20000, "lowpass");

const distortion = new Tone.Distortion(0);

const meter = new Tone.Meter();

////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////// Functions
////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////// Init Function
// This gets triggered when the user closes the dialog element
// It will connect the polysynth => filter => distortion => meter => audio output
function toneInit(){
  polySynth.chain(filter, distortion, meter, Tone.Destination);
}
///////// Init Function
// This is an alternative function if the sampler is instead chosen : the only difference is the variable name
/* 
function toneInit(){
  sampler.chain(filter, distortion, meter, Tone.Destination);
}
*/